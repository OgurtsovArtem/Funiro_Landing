"use strict";var _Swiper,_Swiper2,_Swiper3,_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),Header=function(){function e(t){var r=t.searchButton,i=t.searchForm,a=t.subMenuButtons,n=t.menuClass;(0,_classCallCheck2.default)(this,e),this.searchButton=r,this.searchForm=i,this.subMenuButtons=a,this.menuClass=n,this.listener()}return(0,_createClass2.default)(e,[{key:"searchHandler",value:function(){this.searchForm.classList.toggle("_active")}},{key:"subMenuHandler",value:function(e){var t=e.target;t.closest(this.menuClass)&&t.closest(this.menuClass).classList.toggle("_active")}},{key:"listener",value:function(){var e=this;this.searchButton.addEventListener("click",this.searchHandler.bind(this)),this.subMenuButtons.forEach((function(t){t.addEventListener("click",e.subMenuHandler.bind(e))}))}}]),e}(),HEADER_SETTINGS={searchButton:document.querySelector(".search__button"),searchForm:document.querySelector(".search__from"),subMenuButtons:(0,_toConsumableArray2.default)(document.querySelectorAll(".menu__button")),menuClass:".menu__item"},searchForm=new Header(HEADER_SETTINGS),Burger=function(){function e(t){var r=t.burger,i=t.menu;(0,_classCallCheck2.default)(this,e),this.burger=r,this.menu=i,this.listener()}return(0,_createClass2.default)(e,[{key:"toggle",value:function(){this.menu.classList.toggle("_active"),this.burger.classList.toggle("_active")}},{key:"listener",value:function(){this.burger.addEventListener("click",this.toggle.bind(this))}}]),e}(),BURGER_CONSTANT={burger:document.querySelector(".burger"),menu:document.querySelector(".menu")},burger=new Burger(BURGER_CONSTANT),Profile=function(){function e(t){var r=t.profileIcon,i=t.profileButton;(0,_classCallCheck2.default)(this,e),this.profileIcon=r,this.profileButton=i,this.listener()}return(0,_createClass2.default)(e,[{key:"settings",value:function(){}},{key:"openingStatus",value:function(){this.profileIcon.classList.toggle("_active")}},{key:"authCheck",value:function(){}},{key:"listener",value:function(){this.profileButton.addEventListener("click",this.openingStatus.bind(this))}}]),e}(),PROFILE_SETTINGS={profileIcon:document.querySelector(".user-block"),profileButton:document.querySelector(".user-block__profile")},profile=new Profile(PROFILE_SETTINGS),Popup=function(){function e(t){var r=t.openButton,i=t.popupList,a=t.popupDataName,n=t.popupCloseBtnClass;(0,_classCallCheck2.default)(this,e),this.openButton=r,this.popupList=i,this.popupDataName=a,this.popupCloseBtnClass=n,this.closeBtn,this.popup,this.closeLink=this.close.bind(this),this.listener()}return(0,_createClass2.default)(e,[{key:"open",value:function(){this.popup.classList.add("_active")}},{key:"close",value:function(){this.popup.classList.remove("_active"),this.removeListener()}},{key:"searchForm",value:function(e){var t=this,r=e.target.getAttribute(this.popupDataName);this.popupList.forEach((function(e){var i=e.getAttribute(t.popupDataName);if(e.classList.contains("_active")&&e.classList.remove("_active"),i===r){if(t.closeBtn=e.querySelector(".".concat(t.popupCloseBtnClass)),t.popup=e,!t.closeBtn||!t.popup)throw t.closeBtn?new Error("Ошибка элемента this.popup = ".concat(t.popup)):new Error('Не найден элемент закрытия popup\'a проверте правильность поля "popupCloseBtnClass" и наличие передаваемого класса в DOM');t.open(),t.setListener()}}))}},{key:"setListener",value:function(){this.closeBtn.addEventListener("click",this.closeLink)}},{key:"removeListener",value:function(){this.closeBtn.removeEventListener("click",this.closeLink)}},{key:"listener",value:function(){var e=this;this.openButton.forEach((function(t){t.addEventListener("click",e.searchForm.bind(e))}))}}]),e}(),POPUP_SETTINGS={openButton:(0,_toConsumableArray2.default)(document.querySelectorAll("._popup-btn")),popupList:(0,_toConsumableArray2.default)(document.querySelectorAll("._popup")),popupDataName:"data-popup-name",popupCloseBtnClass:"_popup-close"},poup=new Popup(POPUP_SETTINGS),ChangeForm=function(){function e(t){var r=t.changeFormBtn,i=t.formList,a=t.dataName;(0,_classCallCheck2.default)(this,e),this.changeFormBtn=r,this.formList=i,this.dataName=a,this.form,this.listener()}return(0,_createClass2.default)(e,[{key:"open",value:function(){this.form.classList.add("_active")}},{key:"close",value:function(){}},{key:"change",value:function(e){var t=this,r=e.target.getAttribute(this.dataName);this.formList.forEach((function(i){var a=i.getAttribute(t.dataName);if(!r||!a)throw r?new SyntaxError("Не найден указанный data-атрибут (".concat(t.dataName,"), у элемента выведенного выше ").concat(console.log(i),". Проверте правильность введенных атрибутов")):new Error("Не найден указанный data-атрибут(".concat(t.dataName,")  у элемента выведенного выше ").concat(console.log(e.target),". Проверте правильность введенных атрибутов"));i.classList.contains("_active")&&i.classList.remove("_active"),r===a&&(t.form=i,t.open())}))}},{key:"listener",value:function(){var e=this;this.changeFormBtn.forEach((function(t){t.addEventListener("click",e.change.bind(e))}))}}]),e}(),CHANGE_FORM_SETTINGS={changeFormBtn:(0,_toConsumableArray2.default)(document.querySelectorAll("._change-form-btn")),formList:(0,_toConsumableArray2.default)(document.querySelectorAll("._change-form")),dataName:"data-change-form"},FormValidator=function(){function e(t){var r=t.form;(0,_classCallCheck2.default)(this,e),this.form=r,this.inputs=(0,_toConsumableArray2.default)(this.form.getElementsByTagName("input")),this.submithButton=this.form.querySelector('button[type="submit"]'),this.flag=!0,this.setlistener()}return(0,_createClass2.default)(e,[{key:"checkInputValidity",value:function(e){return!0!==e.validity.tooShort&&(!0!==e.validity.valueMissing&&!0!==e.validity.typeMismatch)}},{key:"validate",value:function(){var e=this;this.flag=!0,this.inputs.forEach((function(t){e.checkInputValidity(t)||(e.flag=!1)})),this.setSubmitButtonState()}},{key:"setSubmitButtonState",value:function(){!0===this.flag?this.submithButton.removeAttribute("disabled"):this.submithButton.setAttribute("disabled",!0)}},{key:"setlistener",value:function(){this.form.addEventListener("input",this.validate.bind(this))}}]),e}(),LOGIN_FORM_VALIDATOR_SETTINGS={form:document.forms.login},REGISTRATRATION_FORM_VALIDATOR_SETTINGS={form:document.forms.registration},loginValidator=new FormValidator(LOGIN_FORM_VALIDATOR_SETTINGS),registrationValidator=new FormValidator(REGISTRATRATION_FORM_VALIDATOR_SETTINGS),introSlider=new Swiper(".slider-block__swiper",(_Swiper={loop:!0,observer:!0,observerParents:!0,slidesPerView:1,spaceBetween:32,watchOverflow:!0,speed:800},(0,_defineProperty2.default)(_Swiper,"loop",!0),(0,_defineProperty2.default)(_Swiper,"loopAdditionalSlides",5),(0,_defineProperty2.default)(_Swiper,"preloadImages",!1),(0,_defineProperty2.default)(_Swiper,"parallax",!0),(0,_defineProperty2.default)(_Swiper,"pagination",{el:".slider-block__pagination",clickable:!0}),(0,_defineProperty2.default)(_Swiper,"navigation",{nextEl:".slider-block__arrow-right",prevEl:".slider-block__arrow-left"}),_Swiper)),compilationSlider=new Swiper(".compilation-slider",(_Swiper2={loop:!0,observer:!0,observerParents:!0,slidesPerView:"auto",spaceBetween:24,watchOverflow:!0},(0,_defineProperty2.default)(_Swiper2,"loop",!0),(0,_defineProperty2.default)(_Swiper2,"speed",1e3),(0,_defineProperty2.default)(_Swiper2,"loopAdditionalSlides",5),(0,_defineProperty2.default)(_Swiper2,"preloadImages",!1),(0,_defineProperty2.default)(_Swiper2,"parallax",!0),(0,_defineProperty2.default)(_Swiper2,"breakpoints",{320:{slidesPerView:1,spaceBetween:20},540:{slidesPerView:2,spaceBetween:20},780:{slidesPerView:"auto",spaceBetween:24}}),_Swiper2)),blogSlider=new Swiper(".blog-slider__items",(_Swiper3={loop:!0,observer:!0,observerParents:!0,slidesPerView:1,spaceBetween:32,watchOverflow:!0},(0,_defineProperty2.default)(_Swiper3,"loop",!0),(0,_defineProperty2.default)(_Swiper3,"speed",1e3),(0,_defineProperty2.default)(_Swiper3,"loopAdditionalSlides",5),(0,_defineProperty2.default)(_Swiper3,"preloadImages",!1),(0,_defineProperty2.default)(_Swiper3,"parallax",!0),(0,_defineProperty2.default)(_Swiper3,"centeredSlides",!0),(0,_defineProperty2.default)(_Swiper3,"pagination",{el:".blog-slider__pagination",clickable:!0}),(0,_defineProperty2.default)(_Swiper3,"navigation",{nextEl:".blog-slider__arrow-right",prevEl:".blog-slider__arrow-left"}),(0,_defineProperty2.default)(_Swiper3,"breakpoints",{320:{slidesPerView:1,spaceBetween:20},540:{slidesPerView:2,spaceBetween:20},780:{slidesPerView:3,spaceBetween:32}}),_Swiper3)),AddProducts=function(){function e(t){var r=t.container,i=t.button;(0,_classCallCheck2.default)(this,e),this.container=r,this.button=i}var t;return(0,_createClass2.default)(e,[{key:"getProducts",value:(t=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(){var t,r;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./products.json",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:r=e.sent,this._template(r),e.next=12;break;case 10:return console.log(err),e.abrupt("return",err);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_template",value:function(e){console.log(e)}},{key:"addButton",value:function(){this.button.addEventListener("click",this.getProducts.bind(this))}}]),e}(),ADD_PRODUCTS_SETTINGS={container:document.querySelector(".products__body"),button:document.querySelector(".products__button")},addProducts=new AddProducts(ADD_PRODUCTS_SETTINGS);